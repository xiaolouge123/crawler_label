<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup 模型选择功能测试页面</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }
        
        .section h2 {
            color: #007cba;
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 2px solid #007cba;
            padding-bottom: 5px;
        }
        
        .test-content {
            background: #fff;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
            margin: 10px 0;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        
        .instructions {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #17a2b8;
            margin: 15px 0;
        }
        
        .warning {
            background: #f8d7da;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        
        .feature-list {
            list-style-type: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .feature-list li:before {
            content: "🔄 ";
            margin-right: 8px;
        }
        
        .popup-preview {
            background: #f8f9fa;
            border: 2px solid #007cba;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: sans-serif;
            font-size: 14px;
        }
        
        .popup-preview h3 {
            margin: 0 0 10px 0;
            color: #007cba;
            font-size: 16px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        
        .model-selector-preview {
            background-color: #f0f8ff;
            border: 1px solid #007cba;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 15px;
        }
        
        .model-selector-preview select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .test-scenario {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007cba;
            margin: 15px 0;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
        }
        
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .comparison-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #007cba;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔄 Popup 模型选择功能测试页面</h1>
        
        <div class="instructions">
            <strong>📋 测试说明：</strong>
            <p>此页面用于测试 popup 界面中新增的模型选择功能，让用户可以快速切换不同的AI模型进行测试。</p>
        </div>
        
        <div class="section">
            <h2>🎯 新功能预览</h2>
            
            <div class="popup-preview">
                <h3>🤖 当前模型</h3>
                <div class="model-selector-preview">
                    <select>
                        <option value="gpt-4.1-mini">gpt-4.1-mini (快速)</option>
                        <option value="gpt-4.1">gpt-4.1 (高质量)</option>
                        <option value="gpt-4.1-nano">gpt-4.1-nano (轻量)</option>
                        <option value="gemini-2.5-flash">gemini-2.5-flash (多模态)</option>
                    </select>
                    <div style="font-size: 11px; color: #666; margin-top: 5px; display: flex; justify-content: space-between;">
                        <span>快速响应，适合日常任务</span>
                        <a href="#" style="font-size: 10px; color: #007cba;">⚙️ 详细设置</a>
                    </div>
                </div>
                <p style="font-size: 12px; color: #666; margin: 0;">
                    <em>↑ 这是在 popup 界面顶部显示的模型选择器</em>
                </p>
            </div>
        </div>
        
        <div class="section">
            <h2>🔧 功能特性</h2>
            <ul class="feature-list">
                <li>在 popup 界面顶部显示当前选择的模型</li>
                <li>下拉菜单包含所有4个可用模型选项</li>
                <li>实时显示模型描述信息</li>
                <li>快速切换模型，无需进入设置页面</li>
                <li>临时模型选择，不影响设置页面的配置</li>
                <li>一键跳转到详细设置页面</li>
                <li>模型选择会保存到本地存储</li>
                <li>AI调用时优先使用popup选择的模型</li>
                <li>导出JSON时包含当前使用的模型信息</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>📊 模型对比表</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>模型名称</th>
                        <th>特点</th>
                        <th>适用场景</th>
                        <th>响应速度</th>
                        <th>输出质量</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>gpt-4.1-mini</strong></td>
                        <td>快速响应，适合日常任务</td>
                        <td>一般文本处理、简单问答</td>
                        <td>⭐⭐⭐⭐⭐</td>
                        <td>⭐⭐⭐⭐</td>
                    </tr>
                    <tr>
                        <td><strong>gpt-4.1</strong></td>
                        <td>高质量输出，适合复杂任务</td>
                        <td>深度分析、创意写作</td>
                        <td>⭐⭐⭐</td>
                        <td>⭐⭐⭐⭐⭐</td>
                    </tr>
                    <tr>
                        <td><strong>gpt-4.1-nano</strong></td>
                        <td>轻量级模型，成本较低</td>
                        <td>简单任务、批量处理</td>
                        <td>⭐⭐⭐⭐⭐</td>
                        <td>⭐⭐⭐</td>
                    </tr>

                    <tr>
                        <td><strong>gemini-2.5-flash</strong></td>
                        <td>快速多模态模型</td>
                        <td>图文混合、多媒体内容</td>
                        <td>⭐⭐⭐⭐</td>
                        <td>⭐⭐⭐⭐</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="section">
            <h2>🧪 测试场景</h2>
            
            <div class="test-scenario">
                <h3>场景 1: 快速模型切换测试</h3>
                <div class="test-content">
                    <p><strong>测试内容：</strong>一段简单的文本</p>
                    <p>人工智能技术正在快速发展，它将改变我们的生活方式。</p>
                </div>
                <div class="highlight">
                    <strong>测试步骤：</strong>
                    <ol>
                        <li>选择 gpt-4.1-mini 模型，生成总结</li>
                        <li>切换到 gpt-4.1 模型，生成同样的总结</li>
                        <li>对比两个模型的输出差异</li>
                        <li>检查导出JSON中的模型信息是否正确</li>
                    </ol>
                </div>
            </div>
            
            <div class="test-scenario">
                <h3>场景 2: 专业模型测试</h3>
                <div class="test-content">
                    <p><strong>测试内容：</strong>一段代码</p>
                    <pre style="background: #f8f9fa; padding: 10px; border-radius: 4px;">
function quickSort(arr) {
    if (arr.length <= 1) return arr;
    const pivot = arr[Math.floor(arr.length / 2)];
    const left = arr.filter(x => x < pivot);
    const right = arr.filter(x => x > pivot);
    return [...quickSort(left), pivot, ...quickSort(right)];
}
                    </pre>
                </div>
                <div class="highlight">
                    <strong>测试步骤：</strong>
                    <ol>
                        <li>使用 gpt-4.1-mini 分析代码</li>
                        <li>切换到 gpt-4.1 分析同样的代码</li>
                        <li>对比不同模型的分析深度</li>
                        <li>验证模型选择的准确性</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>✅ 功能验证清单</h2>
            <ul class="feature-list">
                <li>popup 界面顶部显示模型选择器</li>
                <li>模型选择器包含所有4个模型选项</li>
                <li>选择模型时实时更新描述信息</li>
                <li>模型选择会保存到本地存储</li>
                <li>AI调用时使用popup选择的模型</li>
                <li>"详细设置"链接能正确打开设置页面</li>
                <li>模型切换不影响设置页面的配置</li>
                <li>导出JSON包含正确的模型信息</li>
                <li>页面刷新后模型选择保持不变</li>
                <li>控制台日志显示正确的模型切换信息</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>📝 详细测试步骤</h2>
            <ol>
                <li><strong>基础功能测试：</strong>
                    <ul>
                        <li>点击插件图标，选择页面元素</li>
                        <li>在popup中查看模型选择器是否正确显示</li>
                        <li>尝试切换不同的模型选项</li>
                        <li>观察模型描述是否正确更新</li>
                    </ul>
                </li>
                
                <li><strong>AI调用测试：</strong>
                    <ul>
                        <li>选择一个预设Prompt</li>
                        <li>在不同模型下生成内容</li>
                        <li>对比不同模型的输出结果</li>
                        <li>检查控制台日志中的模型信息</li>
                    </ul>
                </li>
                
                <li><strong>数据导出测试：</strong>
                    <ul>
                        <li>生成AI内容后导出JSON</li>
                        <li>检查requestParameters.model字段</li>
                        <li>确认使用的是popup选择的模型</li>
                    </ul>
                </li>
                
                <li><strong>设置页面集成测试：</strong>
                    <ul>
                        <li>点击"详细设置"链接</li>
                        <li>验证能正确打开设置页面</li>
                        <li>在设置页面修改模型配置</li>
                        <li>返回popup查看是否同步更新</li>
                    </ul>
                </li>
            </ol>
        </div>
        
        <div class="warning">
            <strong>⚠️ 注意事项：</strong>
            <ul>
                <li>popup中的模型选择是临时的，不会覆盖设置页面的配置</li>
                <li>如果没有临时选择，会使用设置页面的默认模型</li>
                <li>模型切换会立即生效，下次AI调用会使用新模型</li>
                <li>确保所选模型在当前API端点中可用</li>
                <li>不同模型可能有不同的响应时间和质量</li>
            </ul>
        </div>
    </div>
</body>
</html> 