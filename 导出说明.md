# 📁 导出功能详细说明

## 🎯 功能概述

Web Agent 数据收集插件的导出功能可以将您的网页内容提取和 AI 处理结果保存为完整的 JSON 文件，包含所有相关数据和元信息。

## 🚀 如何使用导出功能

### 1. 完成 AI 处理
- 选择网页元素
- 使用 OpenAI 模型处理内容
- 等待 AI 生成结果

### 2. 手动导出数据
AI 处理完成后，您会看到三个操作按钮：
- **📁 导出 JSON** (蓝色) - 导出完整数据
- **📋 复制结果** (绿色) - 复制 AI 结果到剪贴板  
- **🔄 重新生成** (黄色) - 重新处理内容

点击"📁 导出 JSON"按钮即可下载完整的数据文件。

### 3. 文件保存位置
- 文件会保存到浏览器的默认下载文件夹
- 文件名格式：`web-extract-{域名}-{时间戳}.json`
- 例如：`web-extract-github.com-20240115-143022.json`

## 📊 导出数据结构

### 完整数据结构
```json
{
  "metadata": {
    "exportTime": "2024-01-15T14:30:22.123Z",
    "pluginVersion": "1.0",
    "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)..."
  },
  "pageInfo": {
    "url": "https://example.com/article",
    "title": "示例文章标题",
    "domain": "example.com",
    "fullPageHtml": "<!DOCTYPE html><html>...</html>",
    "screenshot": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
  },
  "selection": {
    "rawHtml": "<div class='content'>选中的HTML内容</div>",
    "cleanedText": "清理后的纯文本内容...",
    "elementTag": "div",
    "textLength": 1234
  },
  "prompt": {
    "selectedPreset": "文章总结",
    "customPrompt": "请总结以下内容：",
    "specialRequirements": "请用中文回答",
    "fullPrompt": "请总结以下内容：\n\n清理后的纯文本内容...\n\n请用中文回答"
  },
  "aiResponse": {
    "result": "AI 生成的完整结果文本...",
    "success": true,
    "resultLength": 567,
    "requestParameters": {
      "model": "gpt-4.1-mini",
      "maxTokens": 16384,
      "temperature": 0.7,
      "apiProvider": "OpenAI"
    },
    "processingTime": "2024-01-15T14:30:25.456Z"
  },
  "statistics": {
    "totalProcessingTime": "3.2秒",
    "htmlSize": "15.2KB",
    "cleanedTextSize": "8.7KB",
    "promptSize": "8.9KB",
    "responseSize": "2.1KB"
  }
}
```

### 数据字段说明

#### metadata (元数据)
- `exportTime`: 导出时间戳
- `pluginVersion`: 插件版本号
- `userAgent`: 浏览器用户代理信息

#### pageInfo (页面信息)
- `url`: 页面完整URL
- `title`: 页面标题
- `domain`: 域名
- `fullPageHtml`: 完整页面HTML源码
- `screenshot`: 页面截图(base64编码)

#### selection (选中内容)
- `rawHtml`: 选中元素的原始HTML
- `cleanedText`: 清理后的纯文本
- `elementTag`: HTML元素标签名
- `textLength`: 文本字符数

#### prompt (提示信息)
- `selectedPreset`: 使用的预设名称
- `customPrompt`: 自定义提示内容
- `specialRequirements`: 特殊要求
- `fullPrompt`: 发送给AI的完整提示

#### aiResponse (AI响应)
- `result`: AI生成的结果
- `success`: 处理是否成功
- `resultLength`: 结果文本长度
- `requestParameters`: 请求参数
  - `model`: 使用的模型名称
  - `maxTokens`: 最大令牌数
  - `temperature`: 温度参数
  - `apiProvider`: API提供商
- `processingTime`: 处理完成时间

#### statistics (统计信息)
- `totalProcessingTime`: 总处理时间
- `htmlSize`: HTML大小
- `cleanedTextSize`: 清理后文本大小
- `promptSize`: 提示文本大小
- `responseSize`: 响应文本大小

## 🔧 使用场景

### 1. 数据分析和研究
- 批量收集网页内容
- 分析AI模型性能
- 内容质量评估
- 数据挖掘和分析

### 2. 内容管理
- 重要内容备份
- 知识库建设
- 文档整理归档
- 信息检索系统

### 3. 开发和测试
- API调用记录
- 模型效果对比
- 功能测试验证
- 性能分析优化

## 📋 最佳实践

### 1. 文件管理
- 定期整理导出文件
- 按项目或主题分类存储
- 使用有意义的文件名
- 定期备份重要数据

### 2. 数据处理
- 使用JSON解析工具查看数据
- 提取需要的字段进行分析
- 批量处理多个文件
- 转换为其他格式（CSV、Excel等）

### 3. 隐私保护
- 注意敏感信息的处理
- 不要导出包含个人隐私的内容
- 妥善保管导出文件
- 及时删除不需要的数据

## 🛠️ 技术细节

### 文件格式
- 标准JSON格式
- UTF-8编码
- 格式化输出（便于阅读）
- 完整的数据结构

### 兼容性
- 支持所有现代浏览器
- 兼容各种JSON解析工具
- 可导入到数据分析软件
- 支持编程语言处理

### 性能优化
- 异步处理避免界面卡顿
- 大文件分块处理
- 内存使用优化
- 错误处理机制

## ❓ 常见问题

### Q: 导出文件很大怎么办？
A: 
- 文件包含完整HTML和截图，较大是正常的
- 可以选择性提取需要的字段
- 使用压缩工具减小文件大小
- 考虑分批处理大量数据

### Q: 如何批量处理导出文件？
A:
- 使用编程语言（Python、JavaScript等）
- 利用JSON解析库读取数据
- 编写脚本自动化处理
- 使用数据分析工具（Excel、R等）

### Q: 导出失败怎么办？
A:
- 检查浏览器下载权限
- 确认磁盘空间充足
- 查看控制台错误信息
- 尝试重新生成和导出

### Q: 如何保护导出数据的隐私？
A:
- 不要导出敏感个人信息
- 使用加密工具保护文件
- 定期清理不需要的数据
- 注意文件分享和传输安全

---

**提示**: 导出功能是插件的核心特性之一，合理使用可以大大提高您的工作效率和数据管理能力。 